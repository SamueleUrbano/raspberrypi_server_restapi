[TABLES]

access =	CREATE TABLE IF NOT EXISTS "access" (
				"Id" INTEGER NOT NULL UNIQUE,
				"BadgeId" INTEGER NOT NULL,
				"DoorId" INTEGER NOT NULL,
				"CreatedDate" DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
				"LastModifiedDate" DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
				"CreatedById" INTEGER NOT NULL,
				"LastModifiedById" INTEGER NOT NULL,
				PRIMARY KEY ("Id" AUTOINCREMENT),
				CONSTRAINT "BadgeId" FOREIGN KEY ("BadgeId") REFERENCES "badge" ("Id") ON UPDATE CASCADE ON DELETE CASCADE,
				CONSTRAINT "UserId" FOREIGN KEY ("CreatedById") REFERENCES "user" ("Id") ON UPDATE CASCADE ON DELETE CASCADE,
				CONSTRAINT "DoorId" FOREIGN KEY ("DoorId") REFERENCES "door" ("Id") ON UPDATE CASCADE ON DELETE CASCADE,
				CONSTRAINT "UserId" FOREIGN KEY ("LastModifiedById") REFERENCES "user" ("Id") ON UPDATE CASCADE ON DELETE CASCADE
			)

badge  =	CREATE TABLE IF NOT EXISTS "badge" (
				"Id"	INTEGER NOT NULL UNIQUE,
				"BadgeId"	TEXT NOT NULL CHECK(LENGTH("BadgeId") = 8) UNIQUE,
				"FormalBadgeId"	TEXT NOT NULL UNIQUE,
				"FirstName"	TEXT NOT NULL CHECK(LENGTH("FirstName") BETWEEN 1 AND 80),
				"LastName"	TEXT NOT NULL CHECK(LENGTH("FirstName") BETWEEN 1 AND 80),
				"BirthDate"	DATE NOT NULL,
				"PhoneNumber"	TEXT,
				"EmailAddress"	TEXT,
				"CreatedDate"	DATETIME NOT NULL DEFAULT current_timestamp,
				"LastModifiedDate"	DATETIME NOT NULL DEFAULT current_timestamp,
				"IsActive"	INTEGER NOT NULL DEFAULT 0 CHECK("IsActive" = 0 OR "IsActive" = 1),
				"ActivationDate"	DATETIME,
				"IsExpired"	INTEGER NOT NULL DEFAULT 0 CHECK("IsExpired" = 0 OR "IsExpired" = 1),
				"ExpirationDate"	DATETIME,
				"CreatedById"	INTEGER NOT NULL,
				"LastModifiedById"	INTEGER NOT NULL,
				PRIMARY KEY("Id") ON CONFLICT ROLLBACK,
				CONSTRAINT "UserId" FOREIGN KEY("CreatedById") REFERENCES "user"("Id") ON UPDATE CASCADE ON DELETE CASCADE,
				CONSTRAINT "UserId" FOREIGN KEY("LastModifiedById") REFERENCES "user"("Id") ON UPDATE CASCADE ON DELETE CASCADE
			)

door   = 	CREATE TABLE IF NOT EXISTS "door" (
				"Id" INTEGER NOT NULL UNIQUE,
				"DoorId" TEXT NOT NULL CHECK (LENGTH ("DoorId") = 4) UNIQUE,
				"Label" TEXT NOT NULL CHECK (LENGTH ("Label") BETWEEN 1 AND 40),
				"PermissionLevel" TEXT NOT NULL DEFAULT 'BASE' CHECK (
					"PermissionLevel" = 'BASE'
					OR "PermissionLevel" = 'SECRETARIAT'
					OR "PermissionLevel" = 'PRESIDENCY'
				),
				"CreatedDate" DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
				"LastModifiedDate" DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
				"IsActive" INTEGER NOT NULL DEFAULT 1 CHECK (
					IsActive = 0
					OR IsActive = 1
				),
				PRIMARY KEY ("Id" AUTOINCREMENT)
			)

user   =	CREATE TABLE IF NOT EXISTS "user" (
				"Id" INTEGER NOT NULL UNIQUE,
				"FirstName" TEXT NOT NULL CHECK (LENGTH (FirstName) BETWEEN 1 AND 80),
				"LastName" TEXT NOT NULL CHECK (LENGTH (LastName) BETWEEN 1 AND 80),
				"Username" TEXT NOT NULL CHECK (LENGTH (Username) BETWEEN 1 AND 20),
				"Password" TEXT NOT NULL,
				"Profile" TEXT NOT NULL DEFAULT 'GUEST' CHECK (
					Profile = 'GUEST'
					OR Profile = 'OPERATOR'
					OR Profile = 'ADMINISTRATOR'
				),
				"CreatedDate" DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
				"LastModifiedDate" DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
				"IsActive" INTEGER NOT NULL DEFAULT 1 CHECK (
					IsActive = 0
					OR IsActive = 1
				),
				"ActivationDate" DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
				PRIMARY KEY ("Id" AUTOINCREMENT)
			)

[BADGE]
	SELECT_ALL = SELECT * FROM main.badge
	SELECT_ALL_ACTIVE = SELECT * FROM main.badge WHERE IsActive = true